
<!DOCTYPE html><html lang="pt-BR"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Avalia√ß√µes ‚Äî HAMBURGUERIA DOS BIGODES</title>




<style>

:root{
  --bg:#0d0d0f;
  --card:#131316;
  --fg:#f3f4f6;
  --muted:#a1a1aa;
  --brand:#f59e0b;
  --accent:#22c55e;
  --danger:#ef4444;
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font-family:Inter,system-ui,Arial,sans-serif}
.container{max-width:1100px;margin:0 auto;padding:16px}
.nav{display:flex;gap:12px;align-items:center;justify-content:space-between;background:var(--card);padding:10px 16px;position:sticky;top:0;z-index:10;border-bottom:1px solid #222}
.nav a{color:var(--fg);text-decoration:none;padding:8px 12px;border-radius:12px}
.nav a:hover{background:#1c1c22}
.btn{padding:10px 14px;border-radius:12px;border:none;cursor:pointer}
.btn.brand{background:var(--brand);color:#111}
.btn.ghost{background:#1c1c22;color:var(--fg)}
.grid{display:grid;gap:16px}
.grid.cols-3{grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
.card{background:var(--card);border:1px solid #222;border-radius:16px;overflow:hidden}
.card .p{padding:14px}
.price{font-weight:700}
.badge{font-size:12px;color:#111;background:var(--brand);padding:4px 8px;border-radius:999px}
.footer{color:var(--muted);text-align:center;padding:32px}
.input, .select, .textarea{width:100%;padding:12px;border-radius:12px;border:1px solid #2a2a2f;background:#101014;color:var(--fg)}
.section{padding:24px 0}
.hero{display:grid;grid-template-columns:1.1fr 0.9fr;gap:24px;align-items:center}
.hero h1{font-size:44px;margin:0}
.hero p{color:var(--muted)}
.table{width:100%;border-collapse:collapse}
.table th,.table td{border-bottom:1px solid #222;padding:12px;text-align:left}
.rating{display:flex;gap:4px}
.star{font-size:22px;cursor:pointer}
.toast{position:fixed;right:16px;bottom:16px;background:#111;border:1px solid #222;padding:12px 14px;border-radius:12px}
@media (max-width:800px){.hero{grid-template-columns:1fr}}

</style>
</head><body>
<div class="nav container">
  <div><a href="index.html"><strong>üçî HDB</strong></a></div>
  <div style="display:flex;gap:8px">
    <a href="catalog.html">Cat√°logo</a>
    <a href="cart.html">Carrinho</a>
    <a href="track.html">Acompanhar</a>
    <a href="about.html">Sobre</a>
    <a href="reviews.html">Avalia√ß√µes</a>
  </div>
</div>

<div class="container section">
  <h2>Avalia√ß√µes</h2>
  <div class="card p" style="margin-bottom:16px">
    <div class="rating">
      <span class="star" onclick="setStars(1)">‚òÜ</span>
      <span class="star" onclick="setStars(2)">‚òÜ</span>
      <span class="star" onclick="setStars(3)">‚òÜ</span>
      <span class="star" onclick="setStars(4)">‚òÜ</span>
      <span class="star" onclick="setStars(5)">‚òÜ</span>
    </div>
    <textarea id="revComment" class="textarea" placeholder="Conte como foi sua experi√™ncia"></textarea>
    <button class="btn brand" onclick="submitReview()">Enviar avalia√ß√£o</button>
    <small style="color:#777">√â necess√°rio estar logado para avaliar.</small>
  </div>
  <div id="reviewsList" class="grid"></div>
</div>

<div class="footer">¬© 2025 HAMBURGUERIA DOS BIGODES ‚Ä¢ <a href="terms.html">Termos</a> ‚Ä¢ <a href="privacy.html">Privacidade</a></div>
<script>

const API_BASE = localStorage.getItem('API_BASE') || 'http://localhost:3001';
function toast(msg){const el=document.createElement('div');el.className='toast';el.textContent=msg;document.body.appendChild(el);setTimeout(()=>el.remove(),2500);}
function fmtBRL(v){return v.toLocaleString('pt-BR',{style:'currency',currency:'BRL'})}
function navActive(){
  document.querySelectorAll('.nav a').forEach(a=>{
    if (a.href === window.location.href) a.style.background='#1c1c22';
  });
}
document.addEventListener('DOMContentLoaded', navActive);


async function api(path, opts={}){
  const token = localStorage.getItem('token');
  const headers = {'Content-Type':'application/json', ...(opts.headers||{})};
  if (token) headers['Authorization'] = 'Bearer ' + token;
  const res = await fetch(API_BASE + path, {...opts, headers});
  if (!res.ok){
    let msg='Erro';
    try{ const j = await res.json(); msg = j.error || msg; }catch{}
    throw new Error(msg);
  }
  return res.json();
}


let stars = 0;
function setStars(n){
  stars = n;
  document.querySelectorAll('.star').forEach((s,i)=> s.textContent = i < n ? '‚òÖ' : '‚òÜ' );
}
async function submitReview(){
  if(stars<=0) return toast('D√™ uma nota');
  const comment = document.querySelector('#revComment').value;
  try{
    await api('/api/reviews', { method:'POST', body: JSON.stringify({ rating: stars, comment }) });
    toast('Avalia√ß√£o enviada!');
    document.querySelector('#revComment').value=''; setStars(0);
    loadReviews();
  }catch(e){
    if(String(e.message).includes('Token')) return window.location.href='login.html';
    toast(e.message);
  }
}
async function loadReviews(){
  const list = document.querySelector('#reviewsList');
  const rows = await api('/api/reviews');
  list.innerHTML = rows.map(r=>`
    <div class="card p">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong>${r.user_name}</strong>
        <span>${'‚òÖ'.repeat(r.rating)}${'‚òÜ'.repeat(5-r.rating)}</span>
      </div>
      <p style="color:#aaa">${r.comment||''}</p>
      <small style="color:#777">${new Date(r.created_at).toLocaleString('pt-BR')}</small>
    </div>
  `).join('');
}
document.addEventListener('DOMContentLoaded', loadReviews);

</script>
</body></html>
